function $(e){return document.getElementById(e)}var youtubeembed="https://www.youtube.com/embed/?listType=playlist&list=PLMo-usVUpa8ufC01BKbDGNdSLuEs6EtE3",darkmode=!1;function defaultgetsettings(){read_options()}function save_options(){chrome.storage.sync.set({optionskipremember:$("optionskipremember").checked,contextmenus:$("contextmenus").checked,counter:$("counter").checked,copy:$("copy").checked,speech:$("speech").checked,voices:$("voices").checked,fontsize:$("fontsize").value,lineheight:$("lineheight").value,colorlight:$("colorlight").value,colordark:$("colordark").value,backgroundlight:$("backgroundlight").value,backgrounddark:$("backgrounddark").value,backgroundcolor:$("backgroundcolor").checked,backgroundimage:$("backgroundimage").checked,backgroundsize:$("backgroundsize").value,print:$("print").checked,password:$("password").checked})}var firstdefaultvalues={};function read_options(){function e(e,t,n){document.getElementById(e).className=t,document.getElementById(e).setAttribute("aria-disabled",n),setmetathemepopup(n)}function t(t){t.stopPropagation(),e("materialModalRate","hide","true")}$("materialModalYouTubeButtonOK").addEventListener("click",(function(t){!function(t){t.stopPropagation(),window.open(linkyoutube,"_blank"),e("materialModalYouTube","hide","true")}(t),chrome.storage.sync.set({firstsawyoutube:!0})})),$("materialModalYouTubeButtonCANCEL").addEventListener("click",(function(t){!function(t){t.stopPropagation(),e("materialModalYouTube","hide","true")}(t)})),$("materialModalRate").addEventListener("click",(function(e){t(e)})),$("materialModalRateContent").addEventListener("click",(function(e){e.stopPropagation()})),$("materialModalRateButtonWriteOK").addEventListener("click",(function(e){t(e),window.open(writereview),$("sectionreviewbox").style.display="none",chrome.storage.sync.set({reviewedlastonversion:chrome.runtime.getManifest().version})})),$("materialModalRateButtonWriteCANCEL").addEventListener("click",(function(e){t(e),chrome.storage.sync.set({firstsawrate:!1})})),$("materialModalButtonSupportOK").addEventListener("click",(function(e){t(e),window.open(linksupport),chrome.storage.sync.set({firstsawrate:!1})})),$("materialModalButtonSupportCANCEL").addEventListener("click",(function(e){t(e),chrome.storage.sync.set({firstsawrate:!1})})),$("materialModalRateButtonCANCEL").addEventListener("click",(function(e){t(e),chrome.storage.sync.set({firstsawrate:!1})})),document.querySelector('input[name="rating"]')&&document.querySelectorAll('input[name="rating"]').forEach((e=>{e.addEventListener("change",(function(e){var t=e.target.value;5==t||4==t?($("ratepage0").classList.add("hidden"),$("ratepage1high").classList.remove("hidden")):3!=t&&2!=t&&1!=t||($("ratepage0").classList.add("hidden"),$("ratepage1low").classList.remove("hidden"))}))})),chrome.storage.sync.get(["firstDate","contextmenus","optionskipremember","firstsawrate","counter","copy","speech","voices","fontsize","lineheight","colorlight","colordark","backgroundlight","backgrounddark","backgroundcolor","backgroundimage","backgroundsize","print","password","enterpassword"],(function(t){1==t.contextmenus&&($("contextmenus").checked=!0),1==t.optionskipremember&&($("optionskipremember").checked=!0,$("firstcheckboxskipremember").checked=!0),1==t.counter&&($("counter").checked=!0),1==t.copy&&($("copy").checked=!0),1==t.speech&&($("speech").checked=!0),1==t.voices&&($("voices").checked=!0),t.fontsize&&($("fontsize").value=t.fontsize),t.lineheight&&($("lineheight").value=t.lineheight),t.colorlight&&($("colorlight").value=t.colorlight),t.colordark&&($("colordark").value=t.colordark),t.backgroundlight&&($("backgroundlight").value=t.backgroundlight),t.backgrounddark&&($("backgrounddark").value=t.backgrounddark),1==t.backgroundcolor&&($("backgroundcolor").checked=!0),1==t.backgroundimage&&($("backgroundimage").checked=!0),t.backgroundsize&&($("backgroundsize").value=t.backgroundsize),1==t.print&&($("print").checked=!0),1==t.password&&($("password").checked=!0),t.enterpassword&&($("enterpassword").value=t.enterpassword);var n=!1,o=(new Date).getTime();t.firstDate?n=!(o>=t.firstDate+2592e6):(chrome.storage.sync.set({firstDate:o}),n=!0),n?$("sectionreviewbox").style.display="none":1!=$("optionskipremember").checked?($("sectionreviewbox").style.display="block",1!=t.firstsawrate&&(window.setTimeout((function(){e("materialModalRate","show","false")}),2500),chrome.storage.sync.set({firstsawrate:!0}))):$("sectionreviewbox").style.display="none";var a=t.firstsawnumber;1!=$("optionskipremember").checked&&(!(o>=t.firstDate+864e5)||1!=t.firstsawrate&&1!=t.firstsawyoutube&&(void 0!==a&&null!=a||(a=1),4==a&&(window.setTimeout((function(){e("materialModalYouTube","show","false")}),2500),a=0),a+=1,chrome.storage.sync.set({firstsawnumber:a}))),1==devdonate&&($("managed-prefs-banner").className="hidden");var i,r=$("navbar").childNodes,s=r.length;for(i=0;i<s;i++)if("LI"==r[i].nodeName){var c=getFirstChildWithTagName(r[i],"A"),d=getHash(c.getAttribute("data-tab"));tabLinks[d]=c,contentDivs[d]=document.getElementById(d)}var l,u=0;for(l in tabLinks)tabLinks[l].onclick=showTab,tabLinks[l].onfocus=function(){this.blur()},0==u&&(tabLinks[l].className="navbar-item-selected"),u++;var m,g=0;for(m in contentDivs)0!=g&&(contentDivs[m].className="page hidden"),g++;var h=chrome.runtime.getManifest();$("version_number").innerText=h.version,test()}))}chrome.storage.sync.get(["contextmenus","counter","copy","speech","voices","fontsize","lineheight","colorlight","colordark","backgroundlight","backgrounddark","backgroundcolor","backgroundimage","backgroundsize","print","password","enterpassword"],(function(e){null==e.contextmenus&&(firstdefaultvalues.contextmenus=!0),null==e.counter&&(firstdefaultvalues.counter=!0),null==e.copy&&(firstdefaultvalues.copy=!0),null==e.speech&&(firstdefaultvalues.speech=!0),null==e.voices&&(firstdefaultvalues.voices=!1),null==e.fontsize&&(firstdefaultvalues.fontsize=18),null==e.lineheight&&(firstdefaultvalues.lineheight=26),null==e.colorlight&&(firstdefaultvalues.colorlight="#373737"),null==e.colordark&&(firstdefaultvalues.colordark="#ffffff"),null==e.backgroundlight&&(firstdefaultvalues.backgroundlight="#ffffff"),null==e.backgrounddark&&(firstdefaultvalues.backgrounddark="#232323"),null==e.backgroundimage&&null==e.backgroundcolor&&(firstdefaultvalues.backgroundimage=!1,firstdefaultvalues.backgroundcolor=!0),null==e.backgroundsize&&(firstdefaultvalues.backgroundsize=150),null==e.print&&(firstdefaultvalues.print=!0),null==e.password&&(firstdefaultvalues.password=!1),null==e.enterpassword&&(firstdefaultvalues.enterpassword=""),chrome.storage.sync.set(firstdefaultvalues,(function(){}))}));var tabLinks=new Array,contentDivs=new Array;function showTab(){var e=getHash(this.getAttribute("data-tab"));for(var t in contentDivs)t==e?(tabLinks[t].className="navbar-item-selected",contentDivs[t].className="page"):(tabLinks[t].className="navbar-item",contentDivs[t].className="page hidden");return!1}function getFirstChildWithTagName(e,t){for(var n=0;n<e.childNodes.length;n++)if(e.childNodes[n].nodeName==t)return e.childNodes[n]}function getHash(e){var t=e.lastIndexOf("#");return e.substring(t+1)}function test(){document.getElementById("password").checked?(document.getElementById("enterpassword").disabled=!1,document.getElementById("confirmpassword").disabled=!1):(document.getElementById("enterpassword").disabled=!0,document.getElementById("confirmpassword").disabled=!0)}function ariacheck(){var e,t=document.querySelectorAll("input"),n=t.length;for(e=0;e<n;e++)"radio"!=t[e].getAttribute("role")&&"checkbox"!=t[e].getAttribute("role")||(1==t[e].checked?t[e].setAttribute("aria-checked",!0):t[e].setAttribute("aria-checked",!1))}function yearnow(){var e=(new Date).getFullYear();$("yearnow").innerText=e}function setappearancemode(e,t,n){$("dropmenu").className=e,document.body.className=t,$("headlamp").style.webkitFilter=n,$("headlamp").style.filter=n,$("loadinglamp").style.webkitFilter=n,$("loadinglamp").style.filter=n}function godarkmode(){$("dropmenu").className="hide",setappearancemode("hide","dark","invert(1) brightness(2)")}function golightmode(){$("dropmenu").className="hide",setappearancemode("hide","light","invert(0)")}function seticonstyle(e,t,n){$("icondarkauto").style.opacity=e,$("icondarkoff").style.opacity=t,$("icondarkon").style.opacity=n}function checkdarkmode(){chrome.storage.sync.get(["darkmode"],(function(e){null==(darkmode=e.darkmode)&&(darkmode=2),1==darkmode?(godarkmode(),seticonstyle(0,0,1)):0==darkmode?(golightmode(),seticonstyle(0,1,0)):2==darkmode&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?godarkmode():golightmode(),seticonstyle(1,0,0))}))}function setmetatheme(e){const t=document.getElementsByTagName("meta");var n,o;1==e?(n="#1c1c1c",o="#f5f5f5"):(n="#232323",o="#ffffff");let a,i=t.length;for(a=0;a<i;a++)"theme-color"==t[a].getAttribute("name")&&t[a].getAttribute("media")&&("(prefers-color-scheme: light)"==t[a].getAttribute("media")?t[a].setAttribute("content",o):"(prefers-color-scheme: dark)"==t[a].getAttribute("media")&&t[a].setAttribute("content",n))}function setmetathemepopup(e){const t=document.getElementsByTagName("meta");var n,o;1==e?(n="#111111",o="#7f7f7f"):(n="#232323",o="#ffffff");let a,i=t.length;for(a=0;a<i;a++)"theme-color"==t[a].getAttribute("name")&&t[a].getAttribute("media")&&("(prefers-color-scheme: light)"==t[a].getAttribute("media")?t[a].setAttribute("content",o):"(prefers-color-scheme: dark)"==t[a].getAttribute("media")&&t[a].setAttribute("content",n))}function domcontentloaded(){checkdarkmode(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(){checkdarkmode()})),$("dont-turn-off-the-lights").src=youtubeembed,defaultgetsettings(),yearnow();var e=chrome.i18n.getMessage("sharetextd"),t=linkproduct,n=encodeURIComponent(t);$("shareboxyoutube")&&$("shareboxyoutube").addEventListener("click",(function(){window.open(linkyoutube,"_blank")})),$("shareboxfacebook")&&$("shareboxfacebook").addEventListener("click",(function(){window.open("https://www.facebook.com/sharer.php?u="+t+"&t="+e,"Share to Facebook","width=600,height=460,menubar=no,location=no,status=no")})),$("shareboxtwitter")&&$("shareboxtwitter").addEventListener("click",(function(){window.open("https://twitter.com/share?url="+n+"&text="+e,"Share to Twitter","width=600,height=460,menubar=no,location=no,status=no")}));var o=!1,a=document.getElementById("dotmenu");document.addEventListener("click",(()=>{o||($("dropmenu").className="hide"),o=!1})),a.addEventListener("click",(()=>{o=!0})),$("dotmenu").addEventListener("click",(function(){"show"==$("dropmenu").className?$("dropmenu").className="hide":$("dropmenu").className="show"})),$("darkpanel").addEventListener("click",(function(){$("menuToggle").click()})),$("titleex").addEventListener("click",(function(){window.open(linkdeveloperwebsite)})),$("btnsupport").addEventListener("click",(function(){window.open(linksupport),$("dropmenu").className="hide"})),$("btnactivedarkmodeauto").addEventListener("click",(function(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?godarkmode():golightmode(),seticonstyle(1,0,0),chrome.storage.sync.set({darkmode:2})})),$("btnactivedarkmodeoff").addEventListener("click",(function(){golightmode(),seticonstyle(0,1,0),chrome.storage.sync.set({darkmode:0})})),$("btnactivedarkmodeon").addEventListener("click",(function(){godarkmode(),seticonstyle(0,0,1),chrome.storage.sync.set({darkmode:1})})),$("promotext").innerText=chrome.i18n.getMessage("donatetext"),$("spnpromoaction").innerText=chrome.i18n.getMessage("donatecalltoaction"),$("btnpromoaction").addEventListener("click",(function(){window.open(linkdonate)}));var i,r=document.querySelectorAll("input"),s=r.length;for(i=0;i<s;i++)r[i].addEventListener("change",test),r[i].addEventListener("change",ariacheck),r[i].addEventListener("change",save_options);var c,d=document.querySelectorAll("select"),l=d.length;for(c=0;c<l;c++)d[c].addEventListener("change",test),d[c].addEventListener("change",ariacheck),d[c].addEventListener("change",save_options);chrome.runtime.sendMessage({name:"getallpermissions"}),$("managed-prefs-text-close").addEventListener("click",(function(){$("managed-prefs-banner").style.display="none"}));var u=!0;function m(){1==u||($("managed-prefs-banner").style.display="")}function g(){window.innerWidth<480&&$("menuToggle").click()}function h(){$("mainview").scrollTop=0}function f(){$("dont-turn-off-the-lights").src=""}function p(){$("dont-turn-off-the-lights").src=youtubeembed}$("reveal-menu").addEventListener("click",(function(){1==this.checked?setmetatheme(!0):setmetatheme(!1)})),$("tabbasic").addEventListener("click",(function(){h(),f(),p(),$("welcomeguide").src="",m(),u=!0,g()})),$("tabdesign").addEventListener("click",(function(){h(),f(),$("welcomeguide").src="",m(),u=!0,g()})),$("tabadvan").addEventListener("click",(function(){h(),f(),$("welcomeguide").src="",m(),u=!0,g()})),$("tabguide").addEventListener("click",(function(){h(),f(),$("welcomeguide").src=linkguide,$("managed-prefs-banner").style.display="none",u=!1,g()})),$("tabhelp").addEventListener("click",(function(){h(),f(),$("welcomeguide").src="",m(),u=!0,g()})),$("buttonreportissue").addEventListener("click",(function(){window.open(linksupport)})),$("buttonchangelog").addEventListener("click",(function(){window.open(linkchangelog)})),$("buttontranslateme").addEventListener("click",(function(){window.open(linktranslate)})),$("resetinotessidebar").addEventListener("click",(function(){chrome.storage.sync.clear(),chrome.runtime.sendMessage({name:"bckreload"}),location.reload()})),$("confirmpassword").addEventListener("click",(function(){chrome.storage.sync.set({enterpassword:$("enterpassword").value});var e=chrome.i18n.getMessage("optionpasswordsaved");window.alert(e)})),$("backgroundsize").addEventListener("input",(function(){save_options()})),$("imagea").addEventListener("click",(function(){chrome.storage.sync.set({backgroundsource:0})})),$("imageb").addEventListener("click",(function(){chrome.storage.sync.set({backgroundsource:1})})),$("imagec").addEventListener("click",(function(){chrome.storage.sync.set({backgroundsource:2})})),$("imaged").addEventListener("click",(function(){chrome.storage.sync.set({backgroundsource:3})}));var k=chrome.i18n.getMessage("firsttext");$("exportnotes").addEventListener("click",(function(){chrome.storage.sync.get(["txtvalue"],(function(e){var t,n=e.txtvalue;null==n&&(n=k),(t=document.createElement("a"),function(e,n){var o=new Blob([e],{type:"text/plain;charset=utf-8"}),a=window.URL.createObjectURL(o);t.href=a,t.download=n,t.click(),window.URL.revokeObjectURL(a)})(n,"export-notes.txt")}))})),$("war").addEventListener("click",(function(){window.open(writereview,"_blank"),$("sectionreviewbox").style.display="none",chrome.storage.sync.set({reviewedlastonversion:chrome.runtime.getManifest().version})})),$("nt").addEventListener("click",(function(){$("sectionreviewbox").style.display="none",chrome.storage.sync.set({reviewedlastonversion:chrome.runtime.getManifest().version})}));var v=!1;function b(e){""==e.value?function(e){v=!1,e.blur();var t,n=document.getElementsByTagName("section"),o=n.length;for(t=0;t<o;t++)n[t].classList.remove("searchfoundnothing");document.getElementsByClassName("navbar-item-selected")[0].click()}(e):function(e){0==v&&(v=!0,p());var t,n,o=$("navbar").childNodes,a=o.length;for(t=0;t<a;t++)if("LI"==o[t].nodeName){var i=getHash(getFirstChildWithTagName(o[t],"A").getAttribute("data-tab"));contentDivs[i]=document.getElementById(i)}for(n in contentDivs)"tab3"!=n&&contentDivs[n]&&(contentDivs[n].className="page");var r,s=e.value,c=document.getElementsByTagName("section"),d=c.length;for(r=0;r<d;r++){var l=c[r];l.innerHTML.search(new RegExp(s,"i"))<1?l.classList.add("searchfoundnothing"):l.classList.remove("searchfoundnothing")}var u,m=document.getElementsByClassName("page"),g=m.length;for(u=0;u<g;u++){var h,f=m[u].getElementsByTagName("section"),k=0,b=f.length;for(h=0;h<b;h++)f[h].classList.contains("searchfoundnothing")&&(k+=1);k==f.length?m[u].classList.add("searchfoundnothing"):m[u].classList.remove("searchfoundnothing")}}(e)}document.getElementById("appsearch")&&(document.getElementById("appsearch").addEventListener("search",(function(){b(this)}),!1),document.getElementById("appsearch").addEventListener("input",(function(){b(this)}),!1),document.getElementById("btnsearchicon").addEventListener("input",(function(){b(this)}),!1),document.getElementById("appsearch").placeholder=chrome.i18n.getMessage("searchplaceholder"))}chrome.runtime.onMessage.addListener((function(e){if("receiveallpermissions"===e.text){if($("permullist")){var t=document.getElementById("permullist");if(t)for(;t.firstChild;)t.removeChild(t.firstChild)}e.value.forEach((function(e){if($("permissionlist")){if(null==$("permullist")){var t=document.createElement("h4");t.textContent=chrome.i18n.getMessage("permissionrequired"),$("permissionlist").appendChild(t);var n=document.createElement("ul");n.setAttribute("id","permullist"),$("permissionlist").appendChild(n)}var o=document.createElement("li");$("permullist").appendChild(o);var a=document.createElement("span");a.textContent=e+": ",o.appendChild(a);var i="",r=document.createElement("span");"activeTab"==e?i=chrome.i18n.getMessage("permissionactivetab"):"contextMenus"==e?i=chrome.i18n.getMessage("permissioncontextmenu"):"storage"==e?i=chrome.i18n.getMessage("permissionstorage"):"tabs"==e?i=chrome.i18n.getMessage("permissiontabs"):"scripting"==e&&(i=chrome.i18n.getMessage("permissionscripting")),r.textContent=i,r.className="item",o.appendChild(r)}}))}})),window.addEventListener("load",(function(){$("loading").style.display="none"})),document.addEventListener("DOMContentLoaded",domcontentloaded);